!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).DiscordMessageComponentsCore={})}(this,(function(e){"use strict";var t={blue:"https://cdn.discordapp.com/embed/avatars/0.png",gray:"https://cdn.discordapp.com/embed/avatars/1.png",green:"https://cdn.discordapp.com/embed/avatars/2.png",orange:"https://cdn.discordapp.com/embed/avatars/3.png",red:"https://cdn.discordapp.com/embed/avatars/4.png",pink:"https://cdn.discordapp.com/embed/avatars/5.png"},n={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]},r={red:0,orange:60,yellow:120,green:180,blue:240,purple:300};function a(e){var t,a,l=[],o=1;if("string"==typeof e)if(n[e])l=n[e].slice(),a="rgb";else if("transparent"===e)o=0,a="rgb",l=[0,0,0];else if(/^#[A-Fa-f0-9]+$/.test(e)){var i=e.slice(1);o=1,(s=i.length)<=4?(l=[parseInt(i[0]+i[0],16),parseInt(i[1]+i[1],16),parseInt(i[2]+i[2],16)],4===s&&(o=parseInt(i[3]+i[3],16)/255)):(l=[parseInt(i[0]+i[1],16),parseInt(i[2]+i[3],16),parseInt(i[4]+i[5],16)],8===s&&(o=parseInt(i[6]+i[7],16)/255)),l[0]||(l[0]=0),l[1]||(l[1]=0),l[2]||(l[2]=0),a="rgb"}else if(t=/^((?:rgb|hs[lvb]|hwb|cmyk?|xy[zy]|gray|lab|lchu?v?|[ly]uv|lms)a?)\s*\(([^\)]*)\)/.exec(e)){var u=t[1],c="rgb"===u;a=i=u.replace(/a$/,"");var s="cmyk"===i?4:"gray"===i?1:3;l=t[2].trim().split(/\s*[,\/]\s*|\s+/).map((function(e,t){if(/%$/.test(e))return t===s?parseFloat(e)/100:"rgb"===i?255*parseFloat(e)/100:parseFloat(e);if("h"===i[t]){if(/deg$/.test(e))return parseFloat(e);if(void 0!==r[e])return r[e]}return parseFloat(e)})),u===i&&l.push(1),o=c||void 0===l[s]?1:l[s],l=l.slice(0,s)}else e.length>10&&/[0-9](?:\s|\/)/.test(e)&&(l=e.match(/([0-9]+)/g).map((function(e){return parseFloat(e)})),a=e.match(/([a-z])/gi).join("").toLowerCase());else isNaN(e)?Array.isArray(e)||e.length?(l=[e[0],e[1],e[2]],a="rgb",o=4===e.length?e[3]:1):e instanceof Object&&(null!=e.r||null!=e.red||null!=e.R?(a="rgb",l=[e.r||e.red||e.R||0,e.g||e.green||e.G||0,e.b||e.blue||e.B||0]):(a="hsl",l=[e.h||e.hue||e.H||0,e.s||e.saturation||e.S||0,e.l||e.lightness||e.L||e.b||e.brightness]),o=e.a||e.alpha||e.opacity||1,null!=e.opacity&&(o/=100)):(a="rgb",l=[e>>>16,(65280&e)>>>8,255&e]);return{space:a,values:l,alpha:o}}var l=function(e){var t,n,r,a,l,o=e[0]/360,i=e[1]/100,u=e[2]/100;if(0===i)return[l=255*u,l,l];t=2*u-(n=u<.5?u*(1+i):u+i-u*i),a=[0,0,0];for(var c=0;c<3;c++)(r=o+1/3*-(c-1))<0?r++:r>1&&r--,l=6*r<1?t+6*(n-t)*r:2*r<1?n:3*r<2?t+(n-t)*(2/3-r)*6:t,a[c]=255*l;return a};var o,i,u,c,s,d,p,f,h,m,g,y,b,v,k,x,w,R,$,S,j,O,_,T,E,A,C,M,z,F,q,P,I,L,N,B,H,Q,D,U,Z,G,X,Y,J,K,V,W,ee,te,ne,re,ae,le,oe,ie,ue,ce,se,de,pe,fe,he=(o=/\r\n?/g,i=/\t/g,u=/\f/g,c=function(e){return e.replace(o,"\n").replace(u,"").replace(i,"    ")},s=function(e,t){var n=e||{};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r]);return n},d=function(e,t){var n,r=Object.keys(e).filter((function(t){var n=e[t];if(null==n||null==n.match)return!1;var r=n.order;return"number"==typeof r&&isFinite(r)||"undefined"==typeof console||console.warn("simple-markdown: Invalid order for rule `"+t+"`: "+String(r)),!0}));r.sort((function(t,n){var r=e[t],a=e[n],l=r.order,o=a.order;if(l!==o)return l-o;var i=r.quality?0:1,u=a.quality?0:1;return i!==u?i-u:t<n?-1:t>n?1:0}));var a=function(t,l){var o=[];for(n=l=l||n;t;){var i=null,u=null,c=null,s=NaN,d=0,p=r[0],f=e[p];do{var h=f.order,m=null==l.prevCapture?"":l.prevCapture[0],g=f.match(t,l,m);if(g){var y=f.quality?f.quality(g,l,m):0;y<=s||(i=p,u=f,c=g,s=y)}d++,p=r[d],f=e[p]}while(f&&(!c||f.order===h&&f.quality));if(null==u||null==c)throw new Error("Could not find a matching rule for the below content. The rule with highest `order` should always match content provided to it. Check the definition of `match` for '"+r[r.length-1]+"'. It seems to not match the following source:\n"+t);if(c.index)throw new Error("`match` must return a capture starting at index 0 (the current parse index). Did you forget a ^ at the start of the RegExp?");var b=u.parse(c,a,l);Array.isArray(b)?Array.prototype.push.apply(o,b):(null==b.type&&(b.type=i),o.push(b)),l.prevCapture=c,t=t.substring(l.prevCapture[0].length)}return o};return function(e,r){return(n=s(r,t)).inline||n.disableAutoBlockNewlines||(e+="\n\n"),n.prevCapture=null,a(c(e),n)}},p=function(e){var t=function(t,n){return n.inline?e.exec(t):null};return t.regex=e,t},f=function(e){var t=function(t,n){return n.inline?null:e.exec(t)};return t.regex=e,t},h=function(e){var t=function(t,n){return e.exec(t)};return t.regex=e,t},m="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103,g=function(e,t,n){return{$$typeof:m,type:e,key:null==t?void 0:t,ref:null,props:n,_owner:null}},y=function(e,t,n,r){n=n||{},r=void 0===r||r;var a="";for(var l in n){var o=n[l];Object.prototype.hasOwnProperty.call(n,l)&&o&&(a+=" "+w(l)+'="'+w(o)+'"')}var i="<"+e+a+">";return r?i+t+"</"+e+">":i},b={},v=function(e){if(null==e)return null;try{var t=decodeURIComponent(e).replace(/[^A-Za-z0-9/:]/g,"").toLowerCase();if(0===t.indexOf("javascript:")||0===t.indexOf("vbscript:")||0===t.indexOf("data:"))return null}catch(n){return null}return e},k=/[<>&"']/g,x={"<":"&lt;",">":"&gt;","&":"&amp;",'"':"&quot;","'":"&#x27;","/":"&#x2F;","`":"&#96;"},w=function(e){return String(e).replace(k,(function(e){return x[e]}))},R=/\\([^0-9A-Za-z\s])/g,$=function(e){return e.replace(R,"$1")},S=function(e,t,n){var r=n.inline||!1;n.inline=!0;var a=e(t,n);return n.inline=r,a},j=function(e,t,n){var r=n.inline||!1;n.inline=!1;var a=e(t+"\n\n",n);return n.inline=r,a},O=function(e,t,n){return{content:S(t,e[1],n)}},_=function(){return{}},E="( *)("+(T="(?:[*+-]|\\d+\\.)")+") +",A=new RegExp("^"+E),C=new RegExp(E+"[^\\n]*(?:\\n(?!\\1"+T+" )[^\\n]*)*(\n|$)","gm"),z=/^ (?= *`)|(` *) $/g,F=M=/\n{2,}$/,q=/ *\n+$/,P=new RegExp("^( *)("+T+") [\\s\\S]+?(?:\n{2,}(?! )(?!\\1"+T+" )\\n*|\\s*\n*$)"),I=/(?:^|\n)( *)$/,ae=/^ *\| *| *\| *$/g,le=/ *$/,oe=/^ *-+: *$/,ie=/^ *:-+: *$/,ue=/^ *:-+ *$/,ce=function(e){return oe.test(e)?"right":ie.test(e)?"center":ue.test(e)?"left":null},se=function(e,t,n,r){return r&&(e=e.replace(ae,"")),e.trim().split("|").map(ce)},de=function(e,t,n,r){var a=n.inTable;n.inTable=!0;var l=t(e.trim(),n);n.inTable=a;var o=[[]];return l.forEach((function(e,t){"tableSeparator"===e.type?(!r||0!==t&&t!==l.length-1)&&o.push([]):("text"!==e.type||null!=l[t+1]&&"tableSeparator"!==l[t+1].type||(e.content=e.content.replace(le,"")),o[o.length-1].push(e))})),o},pe=function(e,t,n,r){return e.trim().split("\n").map((function(e){return de(e,t,n,r)}))},L={parseTable:(fe=function(e){return function(t,n,r){r.inline=!0;var a=de(t[1],n,r,e),l=se(t[2],0,0,e),o=pe(t[3],n,r,e);return r.inline=!1,{type:"table",header:a,align:l,cells:o}}})(!0),parseNpTable:fe(!1),TABLE_REGEX:/^ *(\|.+)\n *\|( *[-:]+[-| :]*)\n((?: *\|.*(?:\n|$))*)\n*/,NPTABLE_REGEX:/^ *(\S.*\|.*)\n *([-:]+ *\|[-| :]*)\n((?:.*\|.*(?:\n|$))*)\n*/},N="(?:\\[[^\\]]*\\]|[^\\[\\]]|\\](?=[^\\[]*\\]))*",B="\\s*<?((?:\\([^)]*\\)|[^\\s\\\\]|\\\\.)*?)>?(?:\\s+['\"]([\\s\\S]*?)['\"])?\\s*",H=/mailto:/i,Q=function(e,t,n){var r=(e[2]||e[1]).replace(/\s+/g," ").toLowerCase();if(t._defs&&t._defs[r]){var a=t._defs[r];n.target=a.target,n.title=a.title}return t._refs=t._refs||{},t._refs[r]=t._refs[r]||[],t._refs[r].push(n),n},D=0,U={Array:{react:function(e,t,n){for(var r=n.key,a=[],l=0,o=0;l<e.length;l++,o++){n.key=""+l;var i=e[l];if("text"===i.type)for(i={type:"text",content:i.content};l+1<e.length&&"text"===e[l+1].type;l++)i.content+=e[l+1].content;a.push(t(i,n))}return n.key=r,a},html:function(e,t,n){for(var r="",a=0;a<e.length;a++){var l=e[a];if("text"===l.type)for(l={type:"text",content:l.content};a+1<e.length&&"text"===e[a+1].type;a++)l.content+=e[a+1].content;r+=t(l,n)}return r}},heading:{order:D++,match:f(/^ *(#{1,6})([^\n]+?)#* *(?:\n *)+\n/),parse:function(e,t,n){return{level:e[1].length,content:S(t,e[2].trim(),n)}},react:function(e,t,n){return g("h"+e.level,n.key,{children:t(e.content,n)})},html:function(e,t,n){return y("h"+e.level,t(e.content,n))}},nptable:{order:D++,match:f(L.NPTABLE_REGEX),parse:L.parseNpTable,react:null,html:null},lheading:{order:D++,match:f(/^([^\n]+)\n *(=|-){3,} *(?:\n *)+\n/),parse:function(e,t,n){return{type:"heading",level:"="===e[2]?1:2,content:S(t,e[1],n)}},react:null,html:null},hr:{order:D++,match:f(/^( *[-*_]){3,} *(?:\n *)+\n/),parse:_,react:function(e,t,n){return g("hr",n.key,b)},html:function(e,t,n){return"<hr>"}},codeBlock:{order:D++,match:f(/^(?:    [^\n]+\n*)+(?:\n *)+\n/),parse:function(e,t,n){return{lang:void 0,content:e[0].replace(/^    /gm,"").replace(/\n+$/,"")}},react:function(e,t,n){var r=e.lang?"markdown-code-"+e.lang:void 0;return g("pre",n.key,{children:g("code",null,{className:r,children:e.content})})},html:function(e,t,n){var r=e.lang?"markdown-code-"+e.lang:void 0,a=y("code",w(e.content),{class:r});return y("pre",a)}},fence:{order:D++,match:f(/^ *(`{3,}|~{3,}) *(?:(\S+) *)?\n([\s\S]+?)\n?\1 *(?:\n *)+\n/),parse:function(e,t,n){return{type:"codeBlock",lang:e[2]||void 0,content:e[3]}},react:null,html:null},blockQuote:{order:D++,match:f(/^( *>[^\n]+(\n[^\n]+)*\n*)+\n{2,}/),parse:function(e,t,n){return{content:t(e[0].replace(/^ *> ?/gm,""),n)}},react:function(e,t,n){return g("blockquote",n.key,{children:t(e.content,n)})},html:function(e,t,n){return y("blockquote",t(e.content,n))}},list:{order:D++,match:function(e,t){var n=null==t.prevCapture?"":t.prevCapture[0],r=I.exec(n),a=t._list||!t.inline;return r&&a?(e=r[1]+e,P.exec(e)):null},parse:function(e,t,n){var r=e[2],a=r.length>1,l=a?+r:void 0,o=e[0].replace(F,"\n").match(C),i=!1;return{ordered:a,start:l,items:o.map((function(e,r){var a=A.exec(e),l=a?a[0].length:0,u=new RegExp("^ {1,"+l+"}","gm"),c=e.replace(u,"").replace(A,""),s=r===o.length-1,d=-1!==c.indexOf("\n\n")||s&&i;i=d;var p,f=n.inline,h=n._list;n._list=!0,d?(n.inline=!1,p=c.replace(q,"\n\n")):(n.inline=!0,p=c.replace(q,""));var m=t(p,n);return n.inline=f,n._list=h,m}))}},react:function(e,t,n){var r=e.ordered?"ol":"ul";return g(r,n.key,{start:e.start,children:e.items.map((function(e,r){return g("li",""+r,{children:t(e,n)})}))})},html:function(e,t,n){var r=e.items.map((function(e){return y("li",t(e,n))})).join(""),a=e.ordered?"ol":"ul",l={start:e.start};return y(a,r,l)}},def:{order:D++,match:f(/^ *\[([^\]]+)\]: *<?([^\s>]*)>?(?: +["(]([^\n]+)[")])? *\n(?: *\n)*/),parse:function(e,t,n){var r=e[1].replace(/\s+/g," ").toLowerCase(),a=e[2],l=e[3];return n._refs&&n._refs[r]&&n._refs[r].forEach((function(e){e.target=a,e.title=l})),n._defs=n._defs||{},n._defs[r]={target:a,title:l},{def:r,target:a,title:l}},react:function(){return null},html:function(){return""}},table:{order:D++,match:f(L.TABLE_REGEX),parse:L.parseTable,react:function(e,t,n){var r=function(t){return null==e.align[t]?{}:{textAlign:e.align[t]}},a=e.header.map((function(e,a){return g("th",""+a,{style:r(a),scope:"col",children:t(e,n)})})),l=e.cells.map((function(e,a){return g("tr",""+a,{children:e.map((function(e,a){return g("td",""+a,{style:r(a),children:t(e,n)})}))})}));return g("table",n.key,{children:[g("thead","thead",{children:g("tr",null,{children:a})}),g("tbody","tbody",{children:l})]})},html:function(e,t,n){var r=function(t){return null==e.align[t]?"":"text-align:"+e.align[t]+";"},a=e.header.map((function(e,a){return y("th",t(e,n),{style:r(a),scope:"col"})})).join(""),l=e.cells.map((function(e){var a=e.map((function(e,a){return y("td",t(e,n),{style:r(a)})})).join("");return y("tr",a)})).join(""),o=y("thead",y("tr",a)),i=y("tbody",l);return y("table",o+i)}},newline:{order:D++,match:f(/^(?:\n *)*\n/),parse:_,react:function(e,t,n){return"\n"},html:function(e,t,n){return"\n"}},paragraph:{order:D++,match:f(/^((?:[^\n]|\n(?! *\n))+)(?:\n *)+\n/),parse:O,react:function(e,t,n){return g("div",n.key,{className:"paragraph",children:t(e.content,n)})},html:function(e,t,n){return y("div",t(e.content,n),{class:"paragraph"})}},escape:{order:D++,match:p(/^\\([^0-9A-Za-z\s])/),parse:function(e,t,n){return{type:"text",content:e[1]}},react:null,html:null},tableSeparator:{order:D++,match:function(e,t){return t.inTable?/^ *\| */.exec(e):null},parse:function(){return{type:"tableSeparator"}},react:function(){return" | "},html:function(){return" &vert; "}},autolink:{order:D++,match:p(/^<([^: >]+:\/[^ >]+)>/),parse:function(e,t,n){return{type:"link",content:[{type:"text",content:e[1]}],target:e[1]}},react:null,html:null},mailto:{order:D++,match:p(/^<([^ >]+@[^ >]+)>/),parse:function(e,t,n){var r=e[1],a=e[1];return H.test(a)||(a="mailto:"+a),{type:"link",content:[{type:"text",content:r}],target:a}},react:null,html:null},url:{order:D++,match:p(/^(https?:\/\/[^\s<]+[^<.,:;"')\]\s])/),parse:function(e,t,n){return{type:"link",content:[{type:"text",content:e[1]}],target:e[1],title:void 0}},react:null,html:null},link:{order:D++,match:p(new RegExp("^\\[("+N+")\\]\\("+B+"\\)")),parse:function(e,t,n){return{content:t(e[1],n),target:$(e[2]),title:e[3]}},react:function(e,t,n){return g("a",n.key,{href:v(e.target),title:e.title,children:t(e.content,n)})},html:function(e,t,n){var r={href:v(e.target),title:e.title};return y("a",t(e.content,n),r)}},image:{order:D++,match:p(new RegExp("^!\\[("+N+")\\]\\("+B+"\\)")),parse:function(e,t,n){return{alt:e[1],target:$(e[2]),title:e[3]}},react:function(e,t,n){return g("img",n.key,{src:v(e.target),alt:e.alt,title:e.title})},html:function(e,t,n){var r={src:v(e.target),alt:e.alt,title:e.title};return y("img","",r,!1)}},reflink:{order:D++,match:p(new RegExp("^\\[("+N+")\\]\\s*\\[([^\\]]*)\\]")),parse:function(e,t,n){return Q(e,n,{type:"link",content:t(e[1],n)})},react:null,html:null},refimage:{order:D++,match:p(new RegExp("^!\\[("+N+")\\]\\s*\\[([^\\]]*)\\]")),parse:function(e,t,n){return Q(e,n,{type:"image",alt:e[1]})},react:null,html:null},em:{order:D,match:p(new RegExp("^\\b_((?:__|\\\\[\\s\\S]|[^\\\\_])+?)_\\b|^\\*(?=\\S)((?:\\*\\*|\\\\[\\s\\S]|\\s+(?:\\\\[\\s\\S]|[^\\s\\*\\\\]|\\*\\*)|[^\\s\\*\\\\])+?)\\*(?!\\*)")),quality:function(e){return e[0].length+.2},parse:function(e,t,n){return{content:t(e[2]||e[1],n)}},react:function(e,t,n){return g("em",n.key,{children:t(e.content,n)})},html:function(e,t,n){return y("em",t(e.content,n))}},strong:{order:D,match:p(/^\*\*((?:\\[\s\S]|[^\\])+?)\*\*(?!\*)/),quality:function(e){return e[0].length+.1},parse:O,react:function(e,t,n){return g("strong",n.key,{children:t(e.content,n)})},html:function(e,t,n){return y("strong",t(e.content,n))}},u:{order:D++,match:p(/^__((?:\\[\s\S]|[^\\])+?)__(?!_)/),quality:function(e){return e[0].length},parse:O,react:function(e,t,n){return g("u",n.key,{children:t(e.content,n)})},html:function(e,t,n){return y("u",t(e.content,n))}},del:{order:D++,match:p(/^~~(?=\S)((?:\\[\s\S]|~(?!~)|[^\s~\\]|\s(?!~~))+?)~~/),parse:O,react:function(e,t,n){return g("del",n.key,{children:t(e.content,n)})},html:function(e,t,n){return y("del",t(e.content,n))}},inlineCode:{order:D++,match:p(/^(`+)([\s\S]*?[^`])\1(?!`)/),parse:function(e,t,n){return{content:e[2].replace(z,"$1")}},react:function(e,t,n){return g("code",n.key,{children:e.content})},html:function(e,t,n){return y("code",w(e.content))}},br:{order:D++,match:h(/^ {2,}\n/),parse:_,react:function(e,t,n){return g("br",n.key,b)},html:function(e,t,n){return"<br>"}},text:{order:D++,match:h(/^[\s\S]+?(?=[^0-9A-Za-z\s\u00c0-\uffff]|\n\n| {2,}\n|\w+:\S|$)/),parse:function(e,t,n){return{content:e[0]}},react:function(e,t,n){return e.content},html:function(e,t,n){return w(e.content)}}},Z=function(e,t){return t||"undefined"==typeof console||console.warn("simple-markdown ruleOutput should take 'react' or 'html' as the second argument."),function(n,r,a){return e[n.type][t](n,r,a)}},G=function(e){var t=function(n,r){if(r=r||{},Array.isArray(n)){for(var a=r.key,l=[],o=null,i=0;i<n.length;i++){r.key=""+i;var u=t(n[i],r);"string"==typeof u&&"string"==typeof o?(o+=u,l[l.length-1]=o):(l.push(u),o=u)}return r.key=a,l}return e(n,t,r)};return t},X=function(e){var t=function(n,r){return r=r||{},Array.isArray(n)?n.map((function(e){return t(e,r)})).join(""):e(n,t,r)};return t},Y=function(e,t,n){if(!t)throw new Error("simple-markdown: outputFor: `property` must be defined. if you just upgraded, you probably need to replace `outputFor` with `reactFor`");var r,a=(e.Array||U.Array)[t];if(!a)throw new Error("simple-markdown: outputFor: to join nodes of type `"+t+"` you must provide an `Array:` joiner rule with that type, Please see the docs for details on specifying an Array rule.");var l=a,o=function(n,a){return r=a=a||r,Array.isArray(n)?l(n,o,a):e[n.type][t](n,o,a)};return function(e,t){return r=s(t,n),o(e,r)}},J=d(U),K=function(e,t){return(t=t||{}).inline=!1,J(e,t)},V=function(e,t){return(t=t||{}).inline=!0,J(e,t)},W=function(e,t){var n=M.test(e);return(t=t||{}).inline=!n,J(e,t)},ee=Y(U,"react"),te=Y(U,"html"),re=function(e){var t={};for(var n in e)"source"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.children=ne(e.source),g("div",null,t)},{defaultRules:U,parserFor:d,outputFor:Y,inlineRegex:p,blockRegex:f,anyScopeRegex:h,parseInline:S,parseBlock:j,markdownToReact:ne=function(e,t){return ee(K(e,t),t)},markdownToHtml:function(e,t){return te(K(e,t),t)},ReactMarkdown:re,defaultBlockParse:K,defaultInlineParse:V,defaultImplicitParse:W,defaultReactOutput:ee,defaultHtmlOutput:te,preprocess:c,sanitizeText:w,sanitizeUrl:v,unescapeUrl:$,htmlTag:y,reactElement:g,defaultRawParse:J,ruleOutput:Z,reactFor:G,htmlFor:X,defaultParse:function(){return"undefined"!=typeof console&&console.warn("defaultParse is deprecated, please use `defaultImplicitParse`"),W.apply(null,arguments)},defaultOutput:function(){return"undefined"!=typeof console&&console.warn("defaultOutput is deprecated, please use `defaultReactOutput`"),ee.apply(null,arguments)}});function me(e,t,n,r=!0,a={}){"object"==typeof r&&(a=r,r=!0),n||(n={}),n.class&&a.cssModuleNames&&(n.class=n.class.split(" ").map((e=>a.cssModuleNames[e]||e)).join(" "));let l="";for(const i in n)Object.prototype.hasOwnProperty.call(n,i)&&n[i]&&(l+=` ${he.sanitizeText(i)}="${he.sanitizeText(n[i])}"`);const o=`<${e}${l}>`;return r?`${o+t}</${e}>`:o}he.htmlTag=me;const ge={blockQuote:Object.assign({},he.defaultRules.blockQuote,{match:(e,t,n)=>!/^$|\n *$/.test(n)||t.inQuote?null:/^( *>>> ([\s\S]*))|^( *> [^\n]*(\n *> [^\n]*)*\n?)/.exec(e),parse(e,t,n){const r=e[0],a=Boolean(/^ *>>> ?/.exec(r))?/^ *>>> ?/:/^ *> ?/gm;return{content:t(r.replace(a,""),Object.assign({},n,{inQuote:!0})),type:"blockQuote"}}}),codeBlock:Object.assign({},he.defaultRules.codeBlock,{match:he.inlineRegex(/^```(([a-z0-9-]+?)\n+)?\n*([^]+?)\n*```/i),parse:(e,t,n)=>({lang:(e[2]||"").trim(),content:e[3]||"",inQuote:n.inQuote||!1}),html:(e,t,n)=>{const r=me("code",he.sanitizeText(e.content),{},n);return me("pre",r,null,n)}}),newline:he.defaultRules.newline,escape:he.defaultRules.escape,autolink:Object.assign({},he.defaultRules.autolink,{parse:e=>({content:[{type:"text",content:e[1]}],target:e[1]}),html:(e,t,n)=>me("a",t(e.content,n),{href:he.sanitizeUrl(e.target)},n)}),url:Object.assign({},he.defaultRules.url,{parse:e=>({content:[{type:"text",content:e[1]}],target:e[1]}),html:(e,t,n)=>me("a",t(e.content,n),{href:he.sanitizeUrl(e.target)},n)}),em:Object.assign({},he.defaultRules.em,{parse(e,t,n){const r=he.defaultRules.em.parse(e,t,Object.assign({},n,{inEmphasis:!0}));return n.inEmphasis?r.content:r}}),strong:he.defaultRules.strong,u:he.defaultRules.u,strike:Object.assign({},he.defaultRules.del,{match:he.inlineRegex(/^~~([\s\S]+?)~~(?!_)/)}),inlineCode:Object.assign({},he.defaultRules.inlineCode,{match:e=>he.defaultRules.inlineCode.match.regex.exec(e),html:(e,t,n)=>me("code",he.sanitizeText(e.content.trim()),null,n)}),text:Object.assign({},he.defaultRules.text,{match:e=>/^[\s\S]+?(?=[^0-9A-Za-z\s\u00c0-\uffff-]|\n\n|\n|\w+:\S|$)/.exec(e),html:(e,t,n)=>n.escapeHTML?he.sanitizeText(e.content):e.content}),emoticon:{order:he.defaultRules.text.order,match:e=>/^(¯\\_\(ツ\)_\/¯)/.exec(e),parse:e=>({type:"text",content:e[1]}),html:(e,t,n)=>t(e.content,n)},br:Object.assign({},he.defaultRules.br,{match:he.anyScopeRegex(/^\n/)}),spoiler:{order:0,match:e=>/^\|\|([\s\S]+?)\|\|/.exec(e),parse:(e,t,n)=>({content:t(e[1],n)}),html:(e,t,n)=>me("span",t(e.content,n),{class:"d-spoiler ddd"},n)}},ye={user:e=>`@${he.sanitizeText(e.id)}`,channel:e=>`#${he.sanitizeText(e.id)}`,role:e=>`&${he.sanitizeText(e.id)}`,everyone:()=>"@everyone",here:()=>"@here"},be={discordUser:{order:he.defaultRules.strong.order,match:e=>/^<@!?([0-9]*)>/.exec(e),parse:e=>({id:e[1]}),html:(e,t,n)=>me("span",n.discordCallback.user(e),{class:"d-mention d-user"},n)},discordChannel:{order:he.defaultRules.strong.order,match:e=>/^<#?([0-9]*)>/.exec(e),parse:e=>({id:e[1]}),html:(e,t,n)=>me("span",n.discordCallback.channel(e),{class:"d-mention d-channel"},n)},discordRole:{order:he.defaultRules.strong.order,match:e=>/^<@&([0-9]*)>/.exec(e),parse:e=>({id:e[1]}),html:(e,t,n)=>me("span",n.discordCallback.role(e),{class:"d-mention d-role"},n)},discordEmoji:{order:he.defaultRules.strong.order,match:e=>/^<(a?):(\w+):(\d+)>/.exec(e),parse:e=>({animated:"a"===e[1],name:e[2],id:e[3]}),html:(e,t,n)=>me("img","",{class:"d-emoji"+(e.animated?" d-emoji-animated":""),src:`https://cdn.discordapp.com/emojis/${e.id}.${e.animated?"gif":"png"}`,alt:`:${e.name}:`},!1,n)},discordEveryone:{order:he.defaultRules.strong.order,match:e=>/^@everyone/.exec(e),parse:()=>({}),html:(e,t,n)=>me("span",n.discordCallback.everyone(e),{class:"d-mention d-user"},n)},discordHere:{order:he.defaultRules.strong.order,match:e=>/^@here/.exec(e),parse:()=>({}),html:(e,t,n)=>me("span",n.discordCallback.here(e),{class:"d-mention d-user"},n)}};Object.assign(ge,be);const ve=Object.assign({},be,{text:Object.assign({},he.defaultRules.text,{match:e=>/^[\s\S]+?(?=[^0-9A-Za-z\s\u00c0-\uffff-]|\n\n|\n|\w+:\S|$)/.exec(e),html:(e,t,n)=>n.escapeHTML?he.sanitizeText(e.content):e.content})}),ke=Object.assign({},ge,{link:he.defaultRules.link}),xe=he.parserFor(ge),we=he.outputFor(ge,"html"),Re=he.parserFor(ve),$e=he.outputFor(ve,"html"),Se=he.parserFor(ke),je=he.outputFor(ke,"html");var Oe={parser:e=>xe(e,{inline:!0}),htmlOutput:we,toHTML:function(e,t,n,r){if((n||r)&&(!n||!r))throw new Error("You must pass both a custom parser and custom htmlOutput function, not just one");t=Object.assign({embed:!1,escapeHTML:!0,discordOnly:!1,discordCallback:{}},t||{});let a=xe,l=we;n?(a=n,l=r):t.discordOnly?(a=Re,l=$e):t.embed&&(a=Se,l=je);const o={inline:!0,inQuote:!1,inEmphasis:!1,escapeHTML:t.escapeHTML,cssModuleNames:t.cssModuleNames||null,discordCallback:Object.assign({},ye,t.discordCallback)};return l(a(e,o),o)},rules:ge,rulesDiscordOnly:ve,rulesEmbed:ke,markdownEngine:he,htmlTag:me};const _e=new Date;var Te=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",parseColorToRgba:(e,t)=>{var n;if(!e)return null;const[r,o,i,u]=null!=(n=function(e){var t;Array.isArray(e)&&e.raw&&(e=String.raw(...arguments));var n=a(e);return n.space?((t=Array(3))[0]=Math.min(Math.max(n.values[0],0),255),t[1]=Math.min(Math.max(n.values[1],0),255),t[2]=Math.min(Math.max(n.values[2],0),255),"h"===n.space[0]&&(t=l(t)),t.push(Math.min(Math.max(n.alpha,0),1)),t):[]}(e))?n:[];return`rgba(${r},${o},${i},${null!=t?t:u})`},defaultTimestamp:_e,parseTimestamp:({timestamp:e,format:t="cozy"})=>{if(e instanceof Date||(e=new Date(e)),"compact"===t){const[t,n]=[e.getHours(),e.getMinutes()];return[t>12?t-12:0===t?12:t,`:${n.toString().padStart(2,"0")} `,t>=12?"PM":"AM"].join("")}const[n,r,a]=[e.getMonth()+1,e.getDate(),e.getFullYear()];return`${n.toString().padStart(2,"0")}/${r.toString().padStart(2,"0")}/${a}`},resolveImage:(e,t)=>{var n,r;return null!=(r=null!=(n=e[t])?n:t)?r:null==e?void 0:e.default},markdownParser:Oe});e.avatars=t,e.util=Te,Object.defineProperty(e,"__esModule",{value:!0}),e[Symbol.toStringTag]="Module"}));
